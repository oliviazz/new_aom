{"version":3,"file":"registry.js","sources":["../../src/studio/registry.tsx"],"sourcesContent":["// https://nextjs.org/docs/app/building-your-application/styling/css-in-js#styled-components\nimport {useServerInsertedHTML} from 'next/navigation.js'\nimport {useState, useSyncExternalStore} from 'react'\nimport {ServerStyleSheet, StyleSheetManager} from 'styled-components'\n\nexport function StyledComponentsRegistry({children}: {children: React.ReactNode}): JSX.Element {\n  // Only create stylesheet once with lazy initial state\n  // x-ref: https://reactjs.org/docs/hooks-reference.html#lazy-initial-state\n  const [styledComponentsStyleSheet] = useState(() => new ServerStyleSheet())\n\n  useServerInsertedHTML(() => {\n    const styles = styledComponentsStyleSheet.getStyleElement()\n    styledComponentsStyleSheet.instance.clearTag()\n    return <>{styles}</>\n  })\n\n  const isMounted = useSyncExternalStore(\n    subscribe,\n    () => true,\n    () => false,\n  )\n  if (isMounted) return <>{children}</>\n\n  return (\n    <StyleSheetManager sheet={styledComponentsStyleSheet.instance}>{children}</StyleSheetManager>\n  )\n}\n// eslint-disable-next-line no-empty-function\nconst subscribe = () => () => {}\n"],"names":["jsx","Fragment","useServerInsertedHTML","useState","useSyncExternalStore","ServerStyleSheet","StyleSheetManager","StyledComponentsRegistry","children","styledComponentsStyleSheet","styles","getStyleElement","instance","clearTag","subscribe","sheet"],"mappings":"cAKgBA,cAAAC,MAAA,oDAAAC,MAAA,wCAAAC,0BAAAC,MAAA,mCAAAC,uBAAAC,MAAA,oBAAA,SAAAC,GAAyBC,SAACA,IAGxC,MAAOC,GAA8BN,GAAS,IAAM,IAAIE,IAaxD,OAXAH,GAAsB,KACd,MAAAQ,EAASD,EAA2BE,kBAC1C,OAAAF,EAA2BG,SAASC,aAC7BZ,EAAA,CAAGO,SAAOE,GAAA,IAGDN,EAChBU,GACA,KAAM,IACN,KAAM,SAEiBN,aAGtBR,EAAAM,EAAkB,CAAAS,MAAON,EAA2BG,SAAWJ,YAEpE,CAEA,MAAMM,EAAY,IAAM"}