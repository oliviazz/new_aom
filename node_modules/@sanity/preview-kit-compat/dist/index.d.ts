import type { ContentSourceMapDocuments } from '@sanity/client/csm'
import type { QueryParams } from '@sanity/client'

/**
 * 'hit' - the cache is fresh and valid
 * 'stale' - the cache should revalidate, but can't/shouldn't yet (offline, visibility = hidden)
 * 'refresh' - stale cache, and now is a great time to start refreshing
 * 'inflight' - refreshing cache, revalidate events should be ignored
 */
export declare type RevalidateState = 'hit' | 'stale' | 'refresh' | 'inflight'

/**
 * Reports the documents in use on the page to the Presentation Tool, if a connection can be established.
 * @internal
 */
export declare function useDocumentsInUse(
  documentsInUse: Map<string, ContentSourceMapDocuments[number]>,
  projectId: string,
  dataset: string,
): void

/**
 * Return params that are stable with deep equal as long as the key order is the same
 * @internal
 */
export declare function useQueryParams(
  params?: undefined | null | QueryParams,
): QueryParams

/**
 * Keeps track of when queries should revalidate
 */
export declare function useRevalidate(props: {
  /**
   * How frequently queries should be refetched in the background to refresh the parts of queries that can't be source mapped.
   * Setting it to `0` will disable background refresh.
   */
  refreshInterval: number
}): [RevalidateState, () => () => void]

export {}
