"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@sanity/preview-kit-compat"),t=require("react"),n=require("../context.cjs");function i(){return()=>{}}exports.useLiveQuery=function(r,a,o){const s=t.useContext(n.defineStoreContext),u=e.useQueryParams(o),l=t.useMemo((()=>null==s?void 0:s(r,a,u)),[s,r,u,a]),[c]=t.useState((()=>{if(void 0===r)throw new Error("initialSnapshot can't be undefined, if you don't want an initial value use null instead");try{return JSON.parse(JSON.stringify(r))}catch(e){return console.warn("Failed to deep clone initialSnapshot, this is likely an error and an indication that the snapshot isn't JSON serializable",{initialSnapshot:r,error:e}),r}})),d=t.useCallback((()=>c),[c]);return[t.useSyncExternalStore((null==l?void 0:l.subscribe)||i,(null==l?void 0:l.getSnapshot)||d,d),null!==s]};//# sourceMappingURL=useLiveQuery.cjs.map
