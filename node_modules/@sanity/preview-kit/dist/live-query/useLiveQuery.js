import{useQueryParams as n}from"@sanity/preview-kit-compat";import{useContext as t,useMemo as i,useState as r,useCallback as o,useSyncExternalStore as e}from"react";import{defineStoreContext as a}from"../context.js";function l(l,u,c){const p=t(a),d=n(c),h=i((()=>null==p?void 0:p(l,u,d)),[p,l,d,u]),[f]=r((()=>{if(void 0===l)throw new Error("initialSnapshot can't be undefined, if you don't want an initial value use null instead");try{return JSON.parse(JSON.stringify(l))}catch(n){return console.warn("Failed to deep clone initialSnapshot, this is likely an error and an indication that the snapshot isn't JSON serializable",{initialSnapshot:l,error:n}),l}})),m=o((()=>f),[f]);return[e((null==h?void 0:h.subscribe)||s,(null==h?void 0:h.getSnapshot)||m,m),null!==p]}function s(){return()=>{}}export{l as useLiveQuery};//# sourceMappingURL=useLiveQuery.js.map
